import{_ as a,c as s,o as i,a5 as t}from"./chunks/framework.EN5ALL4V.js";const u=JSON.parse('{"title":"The Astria CLI","description":"","frontmatter":{},"headers":[],"relativePath":"local-rollup/2-astria-cli-go.md","filePath":"local-rollup/2-astria-cli-go.md","lastUpdated":1713206801000}'),e={name:"local-rollup/2-astria-cli-go.md"},n=t(`<h1 id="the-astria-cli" tabindex="-1">The Astria CLI <a class="header-anchor" href="#the-astria-cli" aria-label="Permalink to &quot;The Astria CLI&quot;">​</a></h1><p>The <code>astria-go</code> cli is a tool designed to make local rollup development as simple and dependency free as possible. It provides functionality to easily run the Astria stack and interact with the Sequencer.</p><h2 id="install-and-run-cli-from-github-release" tabindex="-1">Install and Run CLI from GitHub release <a class="header-anchor" href="#install-and-run-cli-from-github-release" aria-label="Permalink to &quot;Install and Run CLI from GitHub release&quot;">​</a></h2><p>The CLI binaries are available for download from the <a href="https://github.com/astriaorg/astria-cli-go/releases" target="_blank" rel="noreferrer">releases page</a>. There are binaries available for macOS and Linux, for both x86_64 and arm64 architectures.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># download the binary for your platform, e.g. macOS silicon</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/astriaorg/astria-cli-go/releases/download/v0.3.0/astria-cli-v0.3.0-darwin-arm64.tar.gz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --output</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> astria-go.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># extract the binary</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xzvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> astria-go.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># run the binary and check version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./astria-go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># you can move the binary to a location in your PATH if you&#39;d like</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> astria-go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/</span></span></code></pre></div><h2 id="locally-build-and-run-the-cli" tabindex="-1">Locally Build and Run the CLI <a class="header-anchor" href="#locally-build-and-run-the-cli" aria-label="Permalink to &quot;Locally Build and Run the CLI&quot;">​</a></h2><p>Dependencies: (only required for development)</p><ul><li><a href="https://go.dev/doc/install" target="_blank" rel="noreferrer">GO</a></li><li><a href="https://github.com/casey/just" target="_blank" rel="noreferrer">just</a></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git@github.com:astriaorg/astria-cli-go.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> astria-cli-go</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">just</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">just</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;dev init&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">just</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;dev run&quot;</span></span></code></pre></div><p>This will download, configure, and run the following binaries of these applications:</p><table><thead><tr><th>App</th><th>Version</th></tr></thead><tbody><tr><td>Cometbft</td><td>v0.37.4</td></tr><tr><td>Astria-Sequencer</td><td>v0.9.0</td></tr><tr><td>Astria-Conductor</td><td>v0.12.0</td></tr><tr><td>Astria-Composer</td><td>v0.4.0</td></tr></tbody></table><p>And place them in a <code>local-dev-astria</code> directory, along with several other configuration files for everything.</p><p>The cli runs the minimum viable components for testing a rollup against the Astria stack, allowing developers to confirm that their rollup interacts with Astria&#39;s apis correctly.</p><h2 id="development" tabindex="-1">Development <a class="header-anchor" href="#development" aria-label="Permalink to &quot;Development&quot;">​</a></h2><p>Requires go version 1.20 or newer.</p><p>You may also need to update your <code>gopls</code> settings in your editor for build tags to allow for correct parsing of the build tags in the code. This will depend on your IDE, but for VS Code you can open your settings and add:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;gopls&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;buildFlags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-tags=darwin arm64 amd64 linux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>The cli is built using <a href="https://github.com/spf13/cobra" target="_blank" rel="noreferrer">Cobra</a>. Once you&#39;ve pulled the repo you can install the <code>cobra-cli</code> as follows to add new commands for development:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># install cobra-cli</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/spf13/cobra-cli@latest</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># add new command, e.g. \`run\`</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cobra-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">new-comman</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><h3 id="available-commands" tabindex="-1">Available Commands <a class="header-anchor" href="#available-commands" aria-label="Permalink to &quot;Available Commands&quot;">​</a></h3><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>version</code></td><td>Prints the cli version.</td></tr><tr><td><code>help</code></td><td>Show help.</td></tr><tr><td><code>dev</code></td><td>Root command for cli development functionality.</td></tr><tr><td><code>dev init</code></td><td>Downloads binaries and initializes the local environment.</td></tr><tr><td><code>dev run</code></td><td>Runs a minimal, local Astria stack.</td></tr><tr><td><code>dev clean</code></td><td>Deletes the local data for the Astria stack.</td></tr><tr><td><code>dev clean all</code></td><td>Deletes the local data, downloaded binaries, and config files for the Astria stack.</td></tr><tr><td><code>sequencer create-account</code></td><td>Generate an account for the Sequencer.</td></tr><tr><td><code>sequencer get-balance</code></td><td>Get the balance of an account on the Sequencer.</td></tr></tbody></table>`,21),l=[n];function r(o,h,d,p,c,k){return i(),s("div",null,l)}const F=a(e,[["render",r]]);export{u as __pageData,F as default};
