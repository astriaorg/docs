import{_ as s,c as i,o as e,a5 as a}from"./chunks/framework.EN5ALL4V.js";const u=JSON.parse('{"title":"Astria Cli Networks Configuration","description":"","frontmatter":{},"headers":[],"relativePath":"developer/references/astria-go/cli-networks-configuration.md","filePath":"developer/references/astria-go/cli-networks-configuration.md","lastUpdated":1716595602000}'),t={name:"developer/references/astria-go/cli-networks-configuration.md"},n=a(`<h1 id="astria-cli-networks-configuration" tabindex="-1">Astria Cli Networks Configuration <a class="header-anchor" href="#astria-cli-networks-configuration" aria-label="Permalink to &quot;Astria Cli Networks Configuration&quot;">​</a></h1><p>For each instance created with the <code>astria-go</code> cli, a <code>networks-config.toml</code> file can found in the <code>~/.astria/&lt;instance&gt;/</code> directory. This file allows for simplified configurations of different sequencer networks that can be targeted by the cli.</p><p>Selecting which network the cli is targeting can be controlled by using the <code>--network</code> flag when using the <code>astria-go dev run</code> command.</p><h2 id="primary-use-case" tabindex="-1">Primary Use Case <a class="header-anchor" href="#primary-use-case" aria-label="Permalink to &quot;Primary Use Case&quot;">​</a></h2><p>In general, the default values in the networks config should not need to be changed for most development situations. The most likely case where a user will need to update the configs is if they are trying to test their local components against a different sequencer rpc/grpc.</p><p>For example, the default Astria Dusk dev net configuration is as follows:</p><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dusk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequencer_chain_id = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;astria-dusk-5&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequencer_grpc = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://grpc.sequencer.dusk-5.devnet.astria.org/&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequencer_rpc = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://rpc.sequencer.dusk-5.devnet.astria.org/&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rollup_name = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">default_denom = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;nria&#39;</span></span></code></pre></div><p>If you needed to instead test against different endpoints, you would update the values above to suit your needs, the can run the command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">astria-go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dusk</span></span></code></pre></div><p>To have you local components use the <code>dusk</code> configuration you just set.</p><h2 id="what-the-networks-config-doesn-t-do" tabindex="-1">What the Networks Config Doesn&#39;t Do <a class="header-anchor" href="#what-the-networks-config-doesn-t-do" aria-label="Permalink to &quot;What the Networks Config Doesn&#39;t Do&quot;">​</a></h2><p>The networks config does not control the creation of a sequencer network, even if you are only running a local sequencer. It is used for configuring the Astria services interacting with a given sequencer network at runtime. If you are running a local sequencer stack, you need to use the <code>astria-go dev init</code> command with the <code>--local-network-name</code> and <code>--local-default-denom</code> flags to set the sequencer chain id and default denom respectively.</p><p>For example, if you initialize your local sequencer stack with the following command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">astria-go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --local-network-name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test-chain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --local-default-denom</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> testdenom</span></span></code></pre></div><p>Your local networks config will look like this:</p><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequencer_chain_id = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;test-chain&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequencer_grpc = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://127.0.0.1:8080&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequencer_rpc = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://127.0.0.1:26657&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rollup_name = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;astria-test-chain&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">default_denom = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;testdenom&#39;</span></span></code></pre></div><p>If you then update <code>sequencer_chain_id</code>:</p><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequencer_chain_id = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;different-chain&#39;</span></span></code></pre></div><p>And then run <code>astria-go dev run</code>, your local sequencer will still be started with a chain id of <code>test-chain</code>, but the services run by the <code>astria-go</code> cli will be trying to communicate with a sequencer that has a chain id of <code>different-chain</code>.</p><p>To communicate with the correct sequencer, you need to either revert <code>sequencer_chain_id</code> to <code>&#39;test-chain&#39;</code> or run the following commands to re-initialize your local sequencer to the new chain id:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">astria-go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> purge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> all</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">astria-go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --local-network-name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> different-chain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --local-default-denom</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> testdenom</span></span></code></pre></div>`,21),l=[n];function h(o,r,p,c,d,k){return e(),i("div",null,l)}const F=s(t,[["render",h]]);export{u as __pageData,F as default};
